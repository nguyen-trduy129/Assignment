/*
 * uart.c
 *
 *  Created on: Dec 16, 2022
 *      Author: duyvt
 */

#include "uart.h"

UART_HandleTypeDef huart2;
char str1[10];
char str2[10];
char str3[10];

void uartRun(){
	if (mode == MODE_3){
		switch(state_1){
		case TUN_RED:
			if (timer7_flag ==1){
				HAL_UART_Transmit (&huart2, (void*)str1, sprintf (str1 , "!R:%ld#", redTime), 500);
				setTimer7(30);
			}
			break;
		case TUN_GREEN:
			break;
		case TUN_AMBER:
			break;
		default:
			break;
		}

		HAL_UART_Transmit (&huart2, (void*)str2, sprintf (str2 , "!A:%ld#", amberTime), 500);
		HAL_UART_Transmit (&huart2, (void*)str3, sprintf (str3 , "!G:%ld#", greenTime), 500);
	}
}
